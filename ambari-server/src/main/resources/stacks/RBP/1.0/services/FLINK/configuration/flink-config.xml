<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<configuration>

  <!--General-->

  <property>
    <name>env.log.dir</name>
    <value>/var/log/flink</value>
    <description>Default directory for Flink logs.</description>
  </property>


  <!--JobManager Web Frontend-->

  <property>
    <name>jobmanager.web.port</name>
    <value>8081</value>
    <description>Port of the JobManager’s web interface that displays status of running
      jobs and execution time breakdowns of finished jobs.
      Setting this value to -1 disables the web frontend.</description>
  </property>

  <property>
    <name>jobmanager.web.history</name>
    <value>5</value>
    <description>The number of latest jobs that the JobManager’s web
      front-end in its history</description>
  </property>

  <property>
    <name>jobmanager.web.checkpoints.disable</name>
    <value>false</value>
    <description>Disables checkpoint statistics</description>
  </property>

  <property>
    <name>jobmanager.web.checkpoints.history</name>
    <value>10</value>
    <description>Number of checkpoint statistics to remember</description>
  </property>

  <!--YARN-->

  <property>
    <name>yarn.application-master.port</name>
    <value>6123</value>
    <description>With this configuration option, users can specify a port, a range of ports
      or a list of ports for the Application Master (and JobManager) RPC port.
      Using the default value (0) let the operating system
      choose an appropriate port. In particular when multiple AMs are running on the same
      physical host, fixed port assignments prevent the AM from starting.</description>
  </property>

  <property>
    <name>yarn.application-attempts</name>
    <value>10</value>
    <description>Number of ApplicationMaster restarts.
      Note that that the entire Flink cluster will restart and the YARN Client will loose
      the connection. Also, the JobManager address will change and you'll need to set
      the JM host:port manually.</description>
  </property>


  <!--High Availability Mode-->

  <property>
    <name>recovery.mode</name>
    <value>zookeeper</value>
    <description>Defines the recovery mode used for the cluster execution. Currently,
      Flink supports the ‘standalone’ mode where only a single JobManager runs and
      no JobManager state is checkpointed. The high availability mode ‘zookeeper’
      supports the execution of multiple JobManagers and JobManager state checkpointing.
      Among the group of JobManagers, ZooKeeper elects one of them as the leader which
      is responsible for the cluster execution. In case of a JobManager failure,
      a standby JobManager will be elected as the new leader and is given the
      last checkpointed JobManager state.</description>
  </property>

  <!--Service configs-->

  <property>
    <name>flink_numcontainers</name>
    <value>{{nodes_number}}</value>
    <description>Number of YARN container to allocate (=Number of Task Managers).
      If value is setted to "{{nodes_number}}" automatically the number of containers
      is filled with the number of nodes in the cluster.</description>
  </property>

  <property>
    <name>flink_appname</name>
    <value>flinkapp-from-ambari</value>
    <description>Flink application name</description>
  </property>

  <property>
    <name>flink_queue</name>
    <value>default</value>
    <description>YARN queue to schedule Flink job on</description>
  </property>

  <property>
    <name>flink_jobmanager_memory</name>
    <value>768</value>
    <description>Memory for JobManager Container [in MB]. Must be at least 768</description>
  </property>

  <property>
    <name>flink_container_memory</name>
    <value>1024</value>
    <description>Memory per TaskManager Container [in MB]</description>
  </property>

  <property>
    <name>flink_streaming</name>
    <value>false</value>
    <description>If true, Flink will be started in streaming mode: to be used when only streaming jobs will be executed on Flink</description>
  </property>

</configuration>